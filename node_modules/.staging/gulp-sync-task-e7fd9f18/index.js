+function(gulp, gulp_util, undefined)
{
    'use strict';
    var PLUGIN_NAME = 'gulp-sync-task';
    function sync()
    {
        if (this instanceof sync) new gulp_util.PluginError(PLUGIN_NAME, 'MUST not be use with "new" operator', {showStack: true});
        for (var index = 0, tasks = Array.from(arguments);;)
            return function (callback)
            {
                gulp.on('task_stop', function task_stop()
                {
                    gulp.removeListener('task_stop', task_stop);
                    if (++index === tasks.length) return callback();
                    gulp.on('task_stop', task_stop).start(tasks[index]);
                }).start(tasks[index]);
            }
    };
    Object.defineProperty(sync, 'callback',
    {
        set: function(callback)
        {
            callback();
        }
    });
    module.exports = sync;
}(require('gulp'), require('gulp-util'));